webpackJsonp([3],{"49V8":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mrl"},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:{name:"home"}}},[t._v("首页")]),t._v(" "),a("BreadcrumbItem",[t._v("角色列表")])],1)],1),t._v(" "),a("Row",{staticClass:"button-box"},[a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{placeholder:"角色名"},model:{value:t.params.roleName,callback:function(e){t.$set(t.params,"roleName",e)},expression:"params.roleName"}})],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("Button",{staticClass:"mr",attrs:{type:"ghost"},on:{click:t.searchData}},[t._v("查询")]),t._v(" "),a("Button",{staticClass:"mr",attrs:{type:"info"},on:{click:t.addItem}},[t._v("新增")]),t._v(" "),a("Button",{attrs:{type:"error"},on:{click:t.delItem}},[t._v("删除")])],1)],1),t._v(" "),a("Table",{staticClass:"mrl",attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns,data:t.tableData},on:{"on-selection-change":t.getSelection}}),t._v(" "),a("Page",{staticClass:"page",attrs:{total:t.totalCount,current:t.params.page,"page-size":t.params.pageSize,"show-total":""},on:{"on-change":t.changePage}})],1)},staticRenderFns:[]},r=a("Z0/y")({data:function(){var t=this;return{loading:!1,params:{roleName:"",page:1,pageSize:20},totalCount:0,selectionArr:[],tableData:[],columns:[{type:"selection",width:60,aligin:"center"},{title:"roleName",key:"roleName"},{title:"createTime",key:"createTime"},{title:"updateTime",key:"updateTime"},{title:"",key:"actions",render:function(e,a){return e("Button",{props:{size:"small",type:"primary"},on:{click:function(){t.editItem(a.row.pid)}}},"授权")}}]}},created:function(){this.getTableData()},methods:{searchData:function(){this.params.page=1,this.getTableData()},addItem:function(){this.$router.push({name:"roleAdd"})},editItem:function(t){this.$router.push({name:"roleEdit",params:{id:t}})},delItem:function(){var t=this;if(0!==this.selectionArr.length){var e=[];this.selectionArr.map(function(t){e.push(t.pid)}),this.$Modal.confirm({title:"删除提示",content:"确认删除这些数据吗？",onOk:function(){t.$post("/role/delRole",{roleIds:e}).then(function(e){200==e.code?(t.$Message.success("删除成功！"),t.getTableData()):t.$Message.error(e.msg)})}})}else this.$Message.warning("请至少选择一条数据！")},getSelection:function(t){this.selectionArr=t},changePage:function(t){this.params.page=t,this.getTableData()},getTableData:function(){var t=this;this.$post("/role/queryRolelist",this.params).then(function(e){200==e.code&&(t.tableData=e.data.content,t.totalCount=e.data.total)})}}},o,!1,null,null,null);e.default=r.exports},nj6E:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Breadcrumb",{staticClass:"mrl"},[a("BreadcrumbItem",{attrs:{to:{name:"home"}}},[t._v("首页")]),t._v(" "),a("BreadcrumbItem",{attrs:{to:{name:"roleList"}}},[t._v("角色列表")]),t._v(" "),a("BreadcrumbItem",[t._v(t._s(t.titleName))])],1),t._v(" "),a("Card",{staticClass:"mrl",attrs:{"dis-hover":!0}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.titleName))]),t._v(" "),t.roleId?t._e():a("Form",{ref:"form",staticClass:"content-form",attrs:{model:t.formData,rules:t.formRules,"label-width":120}},[a("FormItem",{attrs:{label:"角色名称",prop:"roleName"}},[a("Input",{attrs:{maxlength:20,placeholder:"角色名称"},model:{value:t.formData.roleName,callback:function(e){t.$set(t.formData,"roleName",e)},expression:"formData.roleName"}})],1),t._v(" "),a("FormItem",[a("Button",{staticClass:"mr",attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确定")]),t._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.$router.go(-1)}}},[t._v("取消")])],1)],1),t._v(" "),t.roleId?a("Form",{staticClass:"content-form",attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"角色权限列表"}},[a("CheckboxGroup",{model:{value:t.applicationIds,callback:function(e){t.applicationIds=e},expression:"applicationIds"}},t._l(t.applicationList,function(e){return a("Row",{key:e.pid},[a("Checkbox",{attrs:{label:e.pid}},[t._v(t._s(e.applicationName))])],1)}))],1),t._v(" "),0!==t.applicationList.length?a("FormItem",[a("Button",{staticClass:"mr",attrs:{type:"primary"},on:{click:t.addRolePermission}},[t._v("确定")]),t._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.$router.go(-1)}}},[t._v("取消")])],1):t._e()],1):t._e()],1)],1)},staticRenderFns:[]},r=a("Z0/y")({data:function(){return{formData:{roleName:""},formRules:{roleName:[{required:!0,message:"必填项",trigger:"blur"}]},applicationIds:[],applicationList:[]}},computed:{roleId:function(){return this.$route.params.id},titleName:function(){return this.roleId?"授权":"新增"}},created:function(){this.roleId&&this.rolePermissionList()},methods:{submitForm:function(){var t=this;this.$refs.form.validate(function(e){e?t.$post("/role/saveRole",t.formData).then(function(e){200==e.code?t.$Modal.success({title:"提示",content:t.titleName+"成功",onOk:function(){t.$router.go(-1)}}):t.$Modal.warning({title:"提示",content:e.msg})}):t.$Message.warning("缺少必填或所填信息有误！")})},rolePermissionList:function(){var t=this;this.$post("/role/rolePermissionList",{roleId:this.roleId}).then(function(e){if(200==e.code){t.applicationList=e.data;for(var a=0;a<e.data.length;a++)e.data[a].check&&t.applicationIds.push(e.data[a].pid)}else t.$Message.warning(e.msg)})},addRolePermission:function(){var t=this;this.$post("/role/addRolePermission",{roleId:this.roleId,applicationIds:this.applicationIds}).then(function(e){200==e.code?t.$Modal.success({title:"提示",content:t.titleName+"修改成功",onOk:function(){t.$router.go(-1)}}):t.$Modal.warning({title:"提示",content:e.msg})})}}},o,!1,null,null,null);e.default=r.exports}});