webpackJsonp([2],{Wi2U:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"mrl"},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:{name:"home"}}},[e._v("首页")]),e._v(" "),a("BreadcrumbItem",{attrs:{to:{name:"userList"}}},[e._v("用户列表")]),e._v(" "),a("BreadcrumbItem",[e._v("新增")])],1)],1),e._v(" "),a("Card",{staticClass:"mrl",attrs:{"dis-hover":!0}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("新增")]),e._v(" "),a("Form",{ref:"form",staticClass:"content-form",attrs:{model:e.formData,rules:e.formRules,"label-width":120}},[a("FormItem",{attrs:{label:"用户名称",prop:"userName"}},[a("Input",{attrs:{maxlength:20,placeholder:"用户名称"},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"密码",prop:"passWord"}},[a("Input",{attrs:{placeholder:"密码"},model:{value:e.formData.passWord,callback:function(t){e.$set(e.formData,"passWord",t)},expression:"formData.passWord"}})],1),e._v(" "),a("FormItem",[a("Button",{staticClass:"mr",attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定")]),e._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(t){e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]},r=a("Z0/y")({data:function(){return{formData:{userName:"",passWord:""},formRules:{userName:[{required:!0,message:"必填项",trigger:"blur"}],passWord:[{required:!0,message:"必填项",trigger:"blur"},{type:"string",min:3,message:"密码长度不能小于3位",trigger:"blur"}]}}},computed:{},created:function(){},methods:{submitForm:function(){var e=this;this.$refs.form.validate(function(t){t?e.$post("/user/saveUser",e.formData).then(function(t){200==t.code?e.$Modal.success({title:"提示",content:"新增成功",onOk:function(){e.$router.go(-1)}}):e.$Modal.warning({title:"提示",content:t.msg})}):e.$Message.warning("缺少必填或所填信息有误！")})}}},s,!1,null,null,null);t.default=r.exports},yqAO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"mrl"},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:{name:"home"}}},[e._v("首页")]),e._v(" "),a("BreadcrumbItem",[e._v("用户列表")])],1)],1),e._v(" "),a("Row",{staticClass:"button-box"},[a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{placeholder:"用户名"},model:{value:e.params.userName,callback:function(t){e.$set(e.params,"userName",t)},expression:"params.userName"}})],1),e._v(" "),a("Col",{attrs:{span:"4"}},[a("Select",{on:{"on-change":e.searchData},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},e._l(e.status,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("Col",{attrs:{span:"8"}},[a("Button",{staticClass:"mr",attrs:{type:"ghost"},on:{click:e.searchData}},[e._v("查询")]),e._v(" "),a("Button",{staticClass:"mr",attrs:{type:"info"},on:{click:e.addItem}},[e._v("新增")]),e._v(" "),a("Button",{attrs:{type:"error"},on:{click:e.delItem}},[e._v("删除")])],1)],1),e._v(" "),a("Table",{staticClass:"mrl",attrs:{border:"",stripe:"",loading:e.loading,columns:e.columns,data:e.tableData},on:{"on-selection-change":e.getSelection}}),e._v(" "),a("Page",{staticClass:"page",attrs:{total:e.totalCount,current:e.params.page,"page-size":e.params.pageSize,"show-total":""},on:{"on-change":e.changePage}}),e._v(" "),a("Modal",{attrs:{title:"重置密码"},on:{"on-ok":e.resetPwd,"on-cancel":e.closeModal},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("Form",{ref:"form",attrs:{"label-width":100,model:e.formData}},[a("FormItem",{attrs:{label:"用户名"}},[a("Input",{attrs:{disabled:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("FormItem",{attrs:{label:"新密码",prop:"passWord",rules:{required:!0,message:"密码最小长度为3位",min:3,trigger:"blur"}}},[a("Input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.formData.passWord,callback:function(t){e.$set(e.formData,"passWord",t)},expression:"formData.passWord"}})],1)],1)],1),e._v(" "),a("Modal",{attrs:{title:"用户角色列表"},on:{"on-ok":e.addUserRole,"on-cancel":e.closeUserRoleModal},model:{value:e.userRoleModal,callback:function(t){e.userRoleModal=t},expression:"userRoleModal"}},[a("CheckboxGroup",{model:{value:e.userParams.roleIds,callback:function(t){e.$set(e.userParams,"roleIds",t)},expression:"userParams.roleIds"}},e._l(e.userRoleList,function(t){return a("Row",{key:t.pid},[a("Checkbox",{attrs:{label:t.pid}},[e._v(e._s(t.roleName))])],1)}))],1)],1)},staticRenderFns:[]},r=a("Z0/y")({data:function(){var e=this;return{loading:!1,modal:!1,userRoleModal:!1,username:"",formData:{userId:"",passWord:""},userRoleList:[],userParams:{roleIds:[],userId:""},params:{userName:"",status:1,page:1,pageSize:20},status:[{id:1,name:"正常"},{id:0,name:"冻结"}],totalCount:0,selectionArr:[],tableData:[],columns:[{type:"selection",width:60,aligin:"center"},{title:"userName",key:"userName"},{title:"createTime",key:"createTime"},{title:"updateTime",key:"updateTime"},{title:"status",key:"status",render:function(t,a){return t("Select",{props:{value:a.row.status},on:{"on-change":function(t){e.$Modal.confirm({title:"状态变更提示",content:"确认修改吗？",onOk:function(){e.$post("/user/updateUser",{userId:a.row.pid,userName:a.row.userName,status:t}).then(function(t){200==t.code?(e.$Message.success("状态更新成功！"),e.getTableData()):(e.$Message.warning(t.msg),e.getTableData())})},onCancel:function(){e.getTableData()}})}}},[t("Option",{props:{value:1}},"正常"),t("Option",{props:{value:0}},"冻结")])}},{title:"",key:"actions",width:200,render:function(t,a){return t("div",[t("Button",{style:{"margin-right":"10px"},props:{size:"small",type:"warning"},on:{click:function(){e.modal=!0,e.formData.userId=a.row.pid,e.username=a.row.userName}}},"重置密码"),t("Button",{props:{size:"small",type:"success"},on:{click:function(){e.userRoleModal=!0,e.userParams.userId=a.row.pid,e.$post("/user/userRoleList",{userId:a.row.pid}).then(function(t){if(200==t.code){e.userRoleList=t.data;for(var a=0;a<t.data.length;a++)t.data[a].check&&e.userParams.roleIds.push(t.data[a].pid)}else e.$Message.warning(t.msg)})}}},"分配用户角色")])}}]}},created:function(){this.getTableData()},methods:{getSelection:function(e){this.selectionArr=e},changePage:function(e){this.params.page=e,this.getTableData()},getTableData:function(){var e=this;this.$post("/user/queryUserlist",this.params).then(function(t){200==t.code&&(e.tableData=t.data.content,e.totalCount=t.data.total)})},searchData:function(){this.params.page=1,this.getTableData()},addItem:function(){this.$router.push({name:"userAdd"})},delItem:function(){var e=this;if(0!==this.selectionArr.length){var t=[];this.selectionArr.map(function(e){t.push(e.pid)}),this.$Modal.confirm({title:"删除提示",content:"确认删除这些数据吗？",onOk:function(){e.$post("/user/delUser",{userIds:t}).then(function(t){200==t.code?(e.$Message.success("删除成功！"),e.getTableData()):e.$Message.error(t.msg)})}})}else this.$Message.warning("请至少选择一条数据！")},resetPwd:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$post("/user/restUserPassWord",e.formData).then(function(t){200==t.code?(e.$Message.success("重置密码成功！"),e.getTableData(),e.formData.userId="",e.formData.passWord=""):e.$Message.warning(t.msg)})})},closeModal:function(){this.formData.userId="",this.formData.passWord="",this.username=""},closeUserRoleModal:function(){this.userRoleModal=!1,this.userParams.roleIds=[]},addUserRole:function(){var e=this;this.$post("/user/addUserRole",this.userParams).then(function(t){200==t.code?(e.$Message.success("用户角色修改成功！"),e.userRoleModal=!1,e.userParams.roleIds=[],e.userParams.userId=""):e.$Message.warning(t.msg)})}}},s,!1,null,null,null);t.default=r.exports}});